<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
   <head profile="http://www.w3.org/2005/10/profile">
      
      <title>Catalogue</title>

      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="apple-touch-fullscreen" content="yes" />

      {% for stylesheet in stylesheets %}
         <link href="{{ stylesheet }}" rel="stylesheet" type="text/css">
      {%- endfor %}
      
      <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=1, user-scalable=no" />
      <meta name="viewport" content="width=320.1">

   </head>

   <body>

      <div id="viewport">

      </div>

      {% for script in scripts %}
         <script type="text/javascript" src="{{ script }}"></script>
      {%- endfor %}

      <script type="text/javascript">
         // Swig Helpers
         if( swigHelpers && swig ) {
            for( var h in swigHelpers ) {
               swig.setFilter( h, swigHelpers[h] );
            }
         }
      </script>

      <script type="text/javascript" src="/build/js/templates.js"></script>

      <script type="text/javascript">
         
         (function() {

            // Browser Address Bar Logic

            var addressHasChanged = function(event) {
               $('#viewport').load( event.value, function(response, status, xhr) {
                  if (status == "error") {
                     var msg = "Sorry but there was an error: <br/><br/>";
                     $("#viewport").html(msg + xhr.status + " " + response);
                  }
               });
            }

            $.address
               .state('/')
               .init(function() {
                  $('body').on('click', 'a', function() {  
                      $.address.value( $(this).attr('href') );  
                      return false;
                  });
               })
               .change(addressHasChanged);
         })();
      </script>
   </body>

</html>
